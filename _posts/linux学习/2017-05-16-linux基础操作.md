---
layout: life
title: linux基础操作
category: linux学习
duoshuo: true
date: 2017-05-16
---


    作者: minus
    时间: 2016-5-23
    版本: V0.0.1
    邮箱: mi@chaoqiankeji.com

<!-- more -->

### 查看ubuntu基本信息
0. 安装／卸载
```sh
sudo apt-get install xxx   : 安装方法1
dpkg -i xxx.deb            : 安装方法2
sudo apt-get purge xxx           : 卸载1
sudo apt-get remove --purge xxx  : 卸载2
sudo apt-get autoremove xxx      : 卸载3
```
1. 查看ubuntu版本号
```sh
ALL: uname -a
Ubuntu: cat /etc/issue
Ubuntu: sudo lsb_release -a
Centos: cat /etc/redhat-release
```
2. 查看linux文件系统大小
```sh
df -h    :  查看系统磁盘使用情况
du -sh   :  查看当前目录总共所占用大小
du -sh * :  查看当前目录／文件所占大小
```
3. 查看linux端口
```sh
netstat -tln                   : 查看哪些端口是开放的
netstat -tunnel | grep port    : 查看具体端口
netstat -tunnpl
```
4. 查看当前进程情况
```sh
ps -ef | grep "进程名"        : 显示已存在的进程
kill pid ／ kill -9 pid      : 通过进程id杀死进程(-9强杀)
```
5. 文件编码转换
```sh
apt-get install convmv -y         :  安装
sudo convmv -f gbk -t utf-8 -r -notest /home
-f: form
-t: to
-nosmart 如果已经是utf-8忽略
-r 递归转化，包含所有子目录
--list 列出所有支持的编码
-notest 马上执行，不加表示只列出什么需要转换的（测试），不做实际转换
```
6. 文件内容编码转换
```sh
sudo iconv -f gbk -t utf-8 -o outfile infile
-o 表示输出的文件名
infile 表示需要转换的文件
-c 忽略无效字符，当出现 "iconv:illegal input sequence at position xxxx"时很有用
```
7. 查看cpu信息
```sh
cat /proc/cpuinfo | grep 'physical id' | sort | uniq | wc -l : 查看物理CPU个数
cat /proc/cpuinfo | grep 'cpu cores' | uniq                  : 查看每个物理CPU中core的个数（即核数）
cat /proc/cpuinfo | grep 'processor' | wc -l                 : 查看逻辑CPU的个数
```
8. 查看内存信息
```sh
free 
top         :  动态显示内存 cpu 进程使用情况
```
9. 系统时区和时间
```sh
date -R                    : 查看时区
sudo tzselect              : 修改时区
```
10. linux日志动态查看
```sh
tail -f xxx.log
```
11. 在当前目录下检索某个字符串所在的文件集：
```sh
grep 'xxx' -rl .|grep -v srs|grep -v tab|grep -v sys
```
12. 服务器之间文件传输
```sh
scp -i ~/.ssh/key local_path/filename username@ip:remote_path  : 本地文件上传至远端服务器上
scp -i ~/.ssh/key username@ip:remote_path/filename local_path  : 远端服务器上文件下载到本地
```
13. 修改文件／目录的权限
```sh
sudo chown -R groupname:username ［filename|dirname］      : 修改某文件或者目录的拥有者
sudo chmod [u+x|u+w|u+r|g+x|o+x|...] filename             : 修改某文件的权限(r/w/x),用户分为(u:user g:group o:other)
```
14. 文件基本操作
```sh
cd           : 进入目录
mv           : 移动文件
rm [-rf]     : 删除
cp [-r]      : 拷贝
ls [-altr]   : 列出
touch        : 生成空文件
cat          : 显示文件内容
head [-n 10] : 显示头多少行
more         : 分页递进显示
pwd          : 显示当前路径
mkdir        : 生成目录
```
15. 远程服务器命令
```sh
ssh -i ~/.ssh/key username@[hostname|ip]
为了避免添加key文件目录和用户名,可以在~/.ssh/config文件中添加如下等陆信息，可实现 “ssh [hostname|ip]” 这种方式登陆
Host [hostname|ip]
  HostName [hostname/ip]
  user username
  IdentityFile /home/xxx/.ssh/xxx.pem
```

### ubuntu添加用户
1. 添加用户
```sh
sudo useradd -m -s /bin/bash username
```
    
2. 更改密码
```sh
sudo passwd username
```
3. 提升sudo权限
```sh
sudo usermod -aG sudo username
```

4. or 修改 /etc/sudoers文件，添加如下(参考里面自身语法)：
```sh
username ALL=(ALL:ALL) ALL
```

5. bash快捷键
```sh
ctrl组合键：
 ctrl + a    : 光标移到行首
 ctrl + b    : 光标左移一个字母
 ctrl + c    : 光标杀死当前进程
 ctrl + d    : 退出当前shell
 ctrl + e    : 光标移到行尾
 ctrl + h    : 删除光标前一个字符，与 backspace 键相同功能
 ctrl + k    : 清除光标后至行尾的内容
 ctrl + u    : 清除光标前至行首的内容
 ctrl + r    : 搜索之前打过的命令，根据你输入的关键字搜索bash的history
 ctrl + w    : 移除光标前的一个词word
 ctrl + t    : 交换光标位置前的两个字符
 ctrl + y    : 粘贴或者恢复上次的删除
 ctrl + d    : 删除光标所在的字母
 ctrl + f    : 右移一个光标
 ctrl + z    : 把当前进程转到后台运行 ， 使用 'fg' 命令恢复
esc组合键:
 esc + d     : 删除光标后的一个词word
 esc + f     : 往右跳一个词word
 esc + b     : 往左跳一个词word
 esc + t     : 交换光标位置前的两个单词位置
```

6. linux设置bash命令中不区分大小写
```sh
在 ~/.inputrc文件中添加如下内容（若没有则新建）
set completion-ignore-case on
set show-all-if-ambiguous on
```

7. 在linux中设置bash命令中上下键实现前缀匹配
```sh
在.bashrc中加入如下内容:
bind '"\e[A": history-search-backward'
bind '"\e[B": history-search-forward'
```

8. linux中的java安装配置（很多其他软件安装方式均为解压添加环境变量这种模式）
```sh
export JAVA_HOME=/usr/local/jdk1.7.0_79
export JRE_HOME=$JAVA_HOME/jre
export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib
export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH
```
