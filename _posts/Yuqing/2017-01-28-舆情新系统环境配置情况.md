---
layout: life
title: yuqing舆情新系统配置情况
category: Yuqing
duoshuo: true
date: 2017-01-28
published: true
---

******

	作者: minus
	版本: V 1.0.1
	日期: 2017年1月27日

<!-- more -->

*******

### <font color="blue" style="font-weight:bold">舆情新系统配置情况</font>

#### **mongo**
___
> 使用 yuqing 账户登录
>
* 机器及目录结构:
	* yuqing1 : /mongo-db  - config / shard / mongos
	* yuqing2 : /mongo-db  - mongos
	* yuqing3 : /mongo-db  - config / shard / mongos
	* yuqing4 : /mongo-db  - config / shard / mongos
>
* 端口情况
	* shard1 : 10001
	* shard2 : 10002
	* shard3 : 10003  
	* config : 10004
	* mongos : 10005
>
* mongo重启
	1. 以yuqing账户登录yuqing2机器
	2. 进入到 /mongos-db 目录
	3. 执行 ```.Stop_All.sh``` 关闭所有机器上的mongo进程
	4. 执行 ```.Start_All.sh``` 启动所有机器mongo进程
    
#### **api**
>
* 机器与目录结构
	* yuqing1 : /var/www/yqapi 
	* yuqing2 : /var/www/yqapi
	* yuqing3 : /var/www/yqapi
	* yuqing4 : /var/www/yqapi
	* apache2 : /etc/apache2/
>
* 端口号
	* yuqing1 : 8899
	* yuqing2 : 8899
	* yuqing3 : 8899
	* yuqing4 : 8899
>
* haproxy配置情况及端口
	* 作用 : haproxy 将四台机器的 8899 端口映射到 9988 这一个机器上	
	* 目录 : yuqing2 - /etc/haproxy （配置文件在此目录）	
	* port : 9988

>
* api重启
	* apache2 : ```sudo service apache2 restart```
	* haproxy : ```sudo service haproxy restart```
	
#### **crawlers**

#### **apache2**

#### **web**

